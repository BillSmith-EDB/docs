---
title: "transaction_rollback_scope parameter"
originalFilePath: txnrollback.md

---

To set the transaction rollback scope inside the database you use the `transaction_rollback_scope` parameter.
The `transaction_rollback_scope` parameter has two possible values:

- `transaction` &mdash; Standard Postgres behavior, where each error
aborts the whole transaction. 

- `statement`&mdash; An error during execution of one statement affects only
that statement and not the status of the transaction as a whole.

## Setting the parameter

You can set the parameter as a user-level property, a connection option, or the mode for specific functions or procedures.

### Set the parameter as a user-level property

```sql
ALTER USER somebody SET transaction_rollback_scope TO statement;
```

### Set the parameter as a connection option

```sh-session
PGOPTIONS="-c transaction_rollback_scope=statement" psql <other options>
```

### Set the mode for specific functions or procedures

If using PL/pgSQL, you can set the mode for specific functions or procedures:

```sql
ALTER FUNCTION myfunc SET transaction_rollback_scope TO statement;
```

## Implementation details
If the `statement` value
is selected, then a subtransaction is opened just before each SQL
command. If the command is successful, the subtransaction is *committed*. If the command raises an error, the subtransaction is
rolled back, and the parent transaction can continue normally. The
effect is that an error during execution of one statement affects only
that statement, and not the status of the transaction as a whole.

Note that committing a subtransaction only assigns the
resources it holds to its parent transaction (which may be the toplevel
transaction, or some other subtransaction if there are user-defined
savepoints involved) - so this is not an "autonomous transaction".
Rolling back a subtransaction releases all the
resources it holds, such as any locks it may have acquired.


