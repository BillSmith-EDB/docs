---
title: "Using a Package Manager to Install Advanced Server"

legacyRedirects:
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.10.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.11.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.09.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.14.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.15.html"

legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.20.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.19.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.17.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.16.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.12.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.08.html"
  - "/edb-docs/d/edb-postgres-advanced-server/installation-getting-started/installation-guide-for-linux/11/EDB_Postgres_Advanced_Server_Installation_Guide_Linux.1.06.html"
---

<div id="using_a_package_manager_to_install_advanced_server" class="registered_link"></div>

You can use the `dnf` or `yum` package manager to install Advanced Server or Advanced Server supporting components. `dnf` or `yum` will attempt to satisfy package dependencies as it installs a package, but requires access to the Advanced Server repositories. If your system does not have access to a repository via the Internet, you can use RPM to install an individual package or create a local repository, but you may be required to manually satisfy package dependencies.

You must have credentials for the EnterpriseDB repository to install Advanced Server; to submit a request for credentials, visit:

<https://info.enterprisedb.com/rs/069-ALB-339/images/Repository%20Access%2004-09-2019.pdf>

For a list of the RPM installers and Debian packages available from EnterpriseDB for Advanced Server and supporting components, see [Advanced Server RPM Packages](#advanced-server-rpm-packages).

Installing the server package creates a database superuser named `enterprisedb`. The user is assigned a user ID (UID) and a group ID (GID) of `26`. The user has no default password; use the `passwd` command to assign a password for the user. The default shell for the user is `bash`, and the user's home directory is `/var/lib/edb/as11`.

By default, Advanced Server logging is configured to write files to the `log` subdirectory of the `data` directory, rotating the files each day and retaining one week of log entries. You can customize the logging behavior of the server by modifying the `postgresql.conf` file. For more information about `Modifying the postgresql.conf File`, see the *EDB Postgres Advanced Server Guide* available at:

https://www.enterprisedb.com/docs


## Installation Pre-requisites

Before using an RPM package to install Advanced Server on a Linux host, you must:

**Install Linux-specific Software**

You must install `xterm, konsole`, or `gnome-terminal` before executing any console-based program installed by EnterpriseDB installers.

**Install Migration Toolkit or EDB\*Plus Installation Prerequisites (Optional)**

Before using an RPM to install Migration Toolkit or EDB\*Plus, you must first install Java version 1.7 or later for Migration Toolkit and Java version 1.8 or later for EDB\*Plus. On a Linux system, you can use the `dnf` or `yum` package manager to install Java. Open a terminal window, assume superuser privileges, and enter:

-   On RHEL or CentOS 7:

    ```text
    # yum -y install java
    ```

-   On RHEL or Rocky Linux or AlmaLinux 8:

    ```text
    # dnf -y install java
    ```

Follow the onscreen instructions to complete the installation.

**Request Credentials to the EnterpriseDB Repository**

Before installing the repository configuration file, you must have credentials that allow access to the EnterpriseDB repository. For information about requesting credentials, visit:

<https://www.enterprisedb.com/user/login>

After receiving your repository credentials you can:

-   Create the repository configuration file.
-   Modify the file, providing your user name and password.
-   Install Advanced Server.

## Installing on CentOS 7 or Rocky Linux/AlmaLinux 8

You can use an RPM package to install Advanced Server on a CentOS 7 or Rocky Linux/AlmaLinux 8 host.

-   To install the repository configuration file, assume superuser privileges and invoke one of the following platform specific commands:

    On CentOS 7:

    ```text
    yum -y install https://yum.enterprisedb.com/edbrepos/edb-repo-latest.noarch.rpm
    ```

    On Rocky Linux/AlmaLinux 8:

    ```text
    dnf -y install https://yum.enterprisedb.com/edbrepos/edb-repo-latest.noarch.rpm
    ```

-   Replace the `USERNAME:PASSWORD` variable in the following command with the username and password of a registered EnterpriseDB user:

    ```text
    sed -i "s@<username>:<password>@USERNAME:PASSWORD@" /etc/yum.repos.d/edb.repo
    ```

-   Before installing Advanced Server, you must install the `epel-release` package:

    On CentOS 7:

    ```text
    # yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
    ```

    On Rocky Linux/AlmaLinux 8:

    ```text
    # dnf -y install epel-release
    ```

-   For Rocky Linux/AlmaLinux 8, enable the PowerTools repository to satisfy package dependencies:

    ```text
    dnf config-manager --set-enabled PowerTools
    ```

    On Rocky Linux/AlmaLinux 8, disable the built-in PostgreSQL module:

    ```text
    dnf -qy module disable postgresql
    ```

The repository configuration file is named `edb.repo`. The file resides in `/etc/yum.repos.d.` 

After saving your changes to the configuration file, you can use `yum install` or `dnf install` command to install Advanced Server. For example, to install the server and its core components, use the command:

-   On CentOS 7:

    ```text
    yum -y install edb-as11-server
    ```

-   On Rocky Linux/AlmaLinux 8:

    ```text
    dnf -y install edb-as11-server
    ```

When you install an RPM package that is signed by a source that is not recognized by your system, `yum` may ask for your permission to import the key to your local server. If prompted, and you are satisfied that the packages come from a trustworthy source, enter a `y`, and press `Return` to continue.

After installing Advanced Server, you must configure the installation. For more information, see [Configuring a Package Installation](#configuring-a-package-installation).

!!! Note
    During the installation, `yum` may encounter a dependency that it cannot resolve. If it does, it will provide a list of the required dependencies that you must manually resolve.

## Installing on RHEL

You can use an RPM package to install Advanced Server on a RHEL host (RHEL 8, 8.3 and onwards). 

-   To install the repository configuration file, assume superuser privileges and invoke one of the following platform specific commands:

    On RHEL 7:

    ```text
    yum -y install https://yum.enterprisedb.com/edbrepos/edb-repo-latest.noarch.rpm
    ```

    On RHEL 8:

    ```text
    dnf -y install https://yum.enterprisedb.com/edbrepos/edb-repo-latest.noarch.rpm
    ```

-   Replace the `USERNAME:PASSWORD` variable in the following command with the username and password of a registered EnterpriseDB user:

    ```text
    sed -i "s@<username>:<password>@USERNAME:PASSWORD@" /etc/yum.repos.d/edb.repo
    ```

-   Before installing Advanced Server, you must install the `epel-release` package:

    On RHEL 7:

    ```text
    # yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
    ```

    On RHEL 8:

    ```text
    # dnf -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
    ```

-   Enable the supporting repositories:

    On RHEL 7, enable the `optional`, `extras`, and `HA` repositories to satisfy package dependencies:

    ```text
    subscription-manager repos --enable "rhel-*-optional-rpms" --enable "rhel-*-extras-rpms"  --enable "rhel-ha-for-rhel-*-server-rpms"
    ```

    On RHEL 8, enable the `codeready-builder-for-rhel-8-*-rpms` repository to satisfy package dependencies:

    ```text
    ARCH=$( /bin/arch )

    subscription-manager repos --enable "codeready-builder-for-rhel-8-${ARCH}-rpms"
    ```

    On RHEL 8, disable the built-in PostgreSQL module:

    ```text
    dnf -qy module disable postgresql
    ```

The repository configuration file is named `edb.repo`. The file resides in `/etc/yum.repos.d.`

After saving your changes to the configuration file, you can use `yum install` or `dnf install` command to install Advanced Server. For example, to install the server and its core components, use the command:

-   On RHEL 7:

    ```text
    yum -y install edb-as11-server
    ```

-   On RHEL 8:

    ```text
    dnf -y install edb-as11-server
    ```

When you install an RPM package that is signed by a source that is not recognized by your system, `yum` may ask for your permission to import the key to your local server. If prompted, and you are satisfied that the packages come from a trustworthy source, enter a `y`, and press `Return` to continue.

After installing Advanced Server, you must configure the installation. For more information, see [Configuring a Package Installation](#configuring-a-package-installation).

!!! Note
    During the installation, `yum` may encounter a dependency that it cannot resolve. If it does, it will provide a list of the required dependencies that you must manually resolve.

## Installing on IBM Power (ppc64le)

You can install EDB Postgres Advanced Server on the following operating systems on IBM Power (ppc64le):

-   [RHEL 8](#on-rhel-8)
-   [SLES 15](#on-sles-15)
-   [SLES 12](#on-sles-12)

### On RHEL 8

Before you begin the installation process:

- Set up the repository

  Setting up the repository is a one-time task. If you have already set up your repository, you do not need to perform this step.

  To set up the repository, go to [EDB repositories](https://www.enterprisedb.com/repos-downloads) and follow the instructions provided there.

- Address other prerequisites

  ```shell
  # Install the EPEL repository:
  sudo dnf -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm

  # Refresh the cache:
  sudo dnf makecache
  # Enable additional repositories to resolve dependencies:
  ARCH=$( /bin/arch ) subscription-manager repos --enable "codeready-builder-for-rhel-8-${ARCH}-rpms"

  #  Disable the built-in PostgreSQL module:
  sudo dnf -qy module disable postgresql
  ```

#### Install the package

```shell
sudo dnf -y install edb-as<xx>-server
```

Where `<xx>` is the version of the EDB Postgres Advanced server you are installing. For example, if you are installing version 11, the package name would be `edb-as11-server`.

To install an individual component:

```shell
sudo dnf -y install <package_name>
```

Where `package_name` can be any of the available packages from the [available package list](/epas/11/epas_inst_linux/install_details/rpm_packages/).

Installing the server package creates an operating system user named enterprisedb. The user is assigned a user ID (UID) and a group ID (GID). The user has no default password. Use the `passwd` command to assign a password for the user. The default shell for the user is `bash` and the user's home directory is `/var/lib/edb/as11`.


### On SLES 15

Before you begin the installation process:

- Set up the repository

  Setting up the repository is a one-time task. If you have already set up your repository, you do not need to perform this step.

  To set up the repository, go to [EDB repositories](https://www.enterprisedb.com/repos-downloads) and follow the instructions provided there.

- Address other prerequisites

  ```shell
  # Activate the required SUSE module
  sudo SUSEConnect -p PackageHub/15.3/ppc64le

  # Refresh the metadata
  sudo zypper refresh
  ```

#### Install the package

```shell
sudo zypper -n install edb-as<xx>-server
```

Where `<xx>` is the version of the EDB Postgres Advanced server you are installing. For example, if you are installing version 11, the package name would be `edb-as11-server`.

To install an individual component:

```shell
sudo zypper -n install <package_name>
```

Where `package_name` can be any of the available packages from the [available package list](/epas/11/epas_inst_linux/install_details/rpm_packages/).

### On SLES 12

Before you begin the installation process:

- Set up the repository

  Setting up the repository is a one-time task. If you have already set up your repository, you do not need to perform this step.

  To set up the repository, go to [EDB repositories](https://www.enterprisedb.com/repos-downloads) and follow the instructions provided there.

- Address other prerequisites

  ```shell
  # Activate the required SUSE module
  sudo SUSEConnect -p PackageHub/12.5/ppc64le
  sudo SUSEConnect -p sle-sdk/12.5/ppc64le

  # Refresh the metadata
  sudo zypper refresh
  ```

#### Install the package

```shell
sudo zypper -n install edb-as<xx>-server
```

Where `<xx>` is the version of the EDB Postgres Advanced server you are installing. For example, if you are installing version 11, the package name would be `edb-as11-server`.

To install an individual component:

```shell
sudo zypper -n install <package_name>
```

Where `package_name` can be any of the available packages from the [available package list](/epas/11/epas_inst_linux/install_details/rpm_packages/).


### Updating an RPM Installation

If you have an existing Advanced Server RPM installation, you can use `yum` or `dnf` to upgrade your repository configuration file and update to a more recent product version. To update the `edb.repo` file, assume superuser privileges and enter:

-   On RHEL or CentOS 7:

    ```text
    yum upgrade edb-repo
    ```

-   On RHEL or Rocky Linux/AlmaLinux 8:

    ```text
    dnf upgrade edb-repo
    ```

`yum` or `dnf` will update the `edb.repo` file to enable access to the current EDB repository, configured to connect with the credentials specified in your `edb.repo` file. Then, you can use `yum` or `dnf` to upgrade all packages whose names include the expression `edb`:

-   On RHEL or CentOS 7:

    ```text
    yum upgrade edb*
    ```

-   On RHEL or Rocky Linux/AlmaLinux 8:

    ```text
    dnf upgrade edb*
    ```

!!! Note
    The `yum upgrade` or `dnf upgrade` command will only perform an update between minor releases; to update between major releases, you must use `pg_upgrade`.

For more information about using yum commands and options, enter `yum --help` on your command line.

For more information about using `dnf` commands and options, visit:

<https://docs.fedoraproject.org/en-US/quick-docs/dnf/>


## Installing on SLES

You can install EDB Postgres Advanced Server on the following SLES host:

-   [SLES 15 on x86_64](#on-sles-15-x86_64)
-   [SLES 12 on x86_64](#on-sles-12-x86_64)
-   [SLES 15 on ppc64le](#on-sles-15)
-   [SLES 12 on ppc64le](#on-sles-12)

### On SLES 15 x86_64

Before you begin the installation process:

- Set up the repository

  Setting up the repository is a one-time task. If you have already set up your repository, you do not need to perform this step.

  To set up the repository, go to [EDB repositories](https://www.enterprisedb.com/repos-downloads) and follow the instructions provided there.

- Address other prerequisites

  ```shell
  # Activate the required SUSE module
  sudo SUSEConnect -p PackageHub/15.3/x86_64

  # Refresh the metadata
  sudo zypper refresh
  ```

#### Install the package

```shell
sudo zypper -n install edb-as<xx>-server
```

Where `<xx>` is the version of the EDB Postgres Advanced server you are installing. For example, if you are installing version 11, the package name would be `edb-as11-server`.

To install an individual component:

```shell
sudo zypper -n install <package_name>
```

Where `package_name` can be any of the available packages from the [available package list](/epas/11/epas_inst_linux/install_details/rpm_packages/#rhelolrocky-linuxalmalinuxcentossles-packages).

### On SLES 12 x86_64

Before you begin the installation process:

- Set up the repository

  Setting up the repository is a one-time task. If you have already set up your repository, you do not need to perform this step.

  To set up the repository, go to [EDB repositories](https://www.enterprisedb.com/repos-downloads) and follow the instructions provided there.

- Address other prerequisites

  ```shell
  # Activate the required SUSE module
  sudo SUSEConnect -p PackageHub/12.5/x86_64
  sudo SUSEConnect -p sle-sdk/12.5/x86_64

  # Refresh the metadata
  sudo zypper refresh
  ```

#### Install the package

```shell
sudo zypper -n install edb-as<xx>-server
```

Where `<xx>` is the version of the EDB Postgres Advanced server you are installing. For example, if you are installing version 11, the package name would be `edb-as11-server`.

To install an individual component:

```shell
sudo zypper -n install <package_name>
```

Where `package_name` can be any of the available packages from the [available package list](/epas/11/epas_inst_linux/install_details/rpm_packages/#rhelolrocky-linuxalmalinuxcentossles-packages).



### Updating Components on a SLES Host:

To update components installed with zypper, use the `zypper update` command.

### Uninstalling Advanced Server on a SLES Host:

To uninstall Advanced Server, assume the identity of a root user and invoke the following command:

```text
zypper remove edb-as11-server
```

## Installing on Debian or Ubuntu

Before you begin the installation process, set up the repository. Setting up the repository is a one-time task. If you have already set up your repository, you do not need to perform this step.

To set up the repository, go to [EDB repositories](https://www.enterprisedb.com/repos-downloads) and follow the instructions provided there.

### Install the package

```shell
sudo apt-get -y install edb-as<xx>-server
```

Where `<xx>` is the version of the EDB Postgres Advanced server you are installing. For example, if you are installing version 11, the package name would be `edb-as11-server`.

To install an individual component:

```shell
sudo apt-get -y install <package_name>
```

Where `package_name` can be any of the available packages from the [available package list](/epas/11/epas_inst_linux/install_details/rpm_packages/#debianubuntu-packages).


## Configuring a Package Installation

The packages that install the database server component create a unit file (on version 7.x or 8.x hosts) and service startup scripts.

## Creating a Database Cluster and Starting the Service

The PostgreSQL `initdb` command creates a database cluster. After installing Advanced Server, you must manually configure the service and invoke `initdb` to create your cluster. When invoking `initdb`, you can:

-   Specify environment options on the command line.
-   Include the `systemd` service manager on RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x and use a service configuration file to configure the environment.

To review the `initdb` documentation, visit:

<https://www.postgresql.org/docs/11/static/app-initdb.html>

After specifying any options in the service configuration file, you can create the database cluster and start the service; these steps are platform specific.

**On RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x**

To invoke `initdb` on a RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x system, with the options specified in the service configuration file, assume the identity of the operating system superuser:

```text
su - root
```

To initialize a cluster with the non-default values, you can use the `PGSETUP_INITDB_OPTIONS` environment variable by invoking the `edb-as-11-setup` cluster initialization script that resides under `EPAS_Home/bin`.

To invoke `initdb` export the `PGSETUP_INITDB_OPTIONS` environment variable with the following command:

```text
PGSETUP_INITDB_OPTIONS="-E UTF-8" /usr/edb/as11/bin/edb-as-11-setup initdb
```

After creating the cluster, use `systemctl` to start, stop, or restart the service:

```text
systemctl { start | stop | restart } edb-as-11
```

**On Ubuntu 18.04**

You can initialize multiple clusters using the bundled scripts. To create a new cluster, assume `root` privileges, and invoke the bundled script:

```text
/usr/bin/epas_createcluster 11 main2
```

To start a new cluster, use the following command:

```text
/usr/bin/epas_ctlcluster 11 main2 start  
```

To list all the available clusters, use the following command:

```text
/usr/bin/epas_lsclusters
```

!!! Note
    The data directory is created under `/var/lib/edb-as/11/main2` and configuration directory is created under `/etc/edb-as/11/main/`.

<div id="specifying_cluster_options_with_initdbopts" class="registered_link"></div>

### Specifying Cluster Options with INITDBOPTS

You can use the `INITDBOPTS` variable to specify your cluster configuration preferences. By default, the `INITDBOPTS` variable is commented out in the service configuration file; unless modified, when you run the service startup script, the new cluster will be created in a mode compatible with Oracle databases. Clusters created in this mode will contain a database named `edb`, and have a database superuser named `enterprisedb`.

To create a new cluster in PostgreSQL mode, remove the pound sign (#) in front of the `INITDBOPTS` variable, enabling the `"---no-redwood-compat"-` option. Clusters created in PostgreSQL mode will contain a database named `postgres`, and have a database superuser named `postgres`.

You may also specify multiple `initdb` options. For example, the following statement:

```text
INITDBOPTS="--no-redwood-compat -U alice --locale=en_US.UTF-8"
```

Creates a database cluster (without compatibility features for Oracle) that contains a database named `postgres` that is owned by a user named `alice`; the cluster uses `UTF-8` encoding.

In addition to the cluster configuration options documented in the PostgreSQL core documentation, Advanced Server supports the following `initdb` options:

`--no-redwood-compat`

 Include the `--no-redwood-compat` keywords to instruct the server to create the cluster in PostgreSQL mode. When the cluster is created in PostgreSQL mode, the name of the database superuser will be `postgres` and the name of the default database will be `postgres`. The few Advanced Server’s features compatible with Oracle databases will be available with this mode. However, we recommend using the Advanced server in redwood compatibility mode to use all its features.
 
`--redwood-like`

 Include the `--redwood-like` keywords to instruct the server to use an escape character (an empty string ('')) following the `LIKE` (or PostgreSQL-compatible `ILIKE`) operator in a SQL statement that is compatible with Oracle syntax.

`--icu-short-form`

 Include the `--icu-short-form` keywords to create a cluster that uses a default ICU (International Components for Unicode) collation for all databases in the cluster. For more information about Unicode collations, refer to the *EDB Postgres Advanced Server Guide* available at:

[https://www.enterprisedb.com/docs](/epas/latest/)

For more information about using `initdb`, and the available cluster configuration options, see the PostgreSQL Core Documentation available at:

<https://www.postgresql.org/docs/11/static/app-initdb.html>

You can also view online help for `initdb` by assuming superuser privileges and entering:

```text
/path_to_initdb_installation_directory/initdb --help
```

Where `path_to_initdb_installation_directory` specifies the location of the `initdb` binary file.

### Modifying the Data Directory Location on RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x

On a RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x host, the unit file is named `edb-as-11.service` and resides in `/usr/lib/systemd/system`. The unit file contains references to the location of the Advanced Server `data` directory. You should avoid making any modifications directly to the unit file because it may be overwritten during package upgrades.

By default, data files reside under `/var/lib/edb/as11/data` directory. To use a data directory that resides in a non-default location, perform the following steps:

-   Create a copy of the unit file under the `/etc` directory:

    ```text
    cp /usr/lib/systemd/system/edb-as-11.service /etc/systemd/system/
    ```

-   After copying the unit file to the new location, modify the service file `/etc/systemd/system/edb-as-11.service` with your editor of choice, correcting any required paths.

-   Use the following command to reload `systemd`, updating the modified service scripts:

    ```text
    systemctl daemon-reload
    ```

-   Start the Advanced Server service with the following command:

    ```text
    systemctl start edb-as-11
    ```

## Starting Multiple Postmasters with Different Clusters

You can configure Advanced Server to use multiple postmasters, each with its own database cluster. The steps required are version specific to the Linux host.

**On RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x**

The `edb-as11-server-core` RPM for version 7.x | 8.x contains a unit file that starts the Advanced Server instance. The file allows you to start multiple services, with unique `data` directories and that monitor different ports. You must have `root` access to invoke or modify the script.

The example that follows creates an Advanced Server installation with two instances; the secondary instance is named `secondary`:

-   Make a copy of the default file with the new name. As noted at the top of the file, all modifications must reside under `/etc`. You must pick a name that is not already used in `/etc/systemd/system`.

    ```text
    cp /usr/lib/systemd/system/edb-as-11.service /etc/systemd/system/secondary-edb-as-11.service
    ```

-   Edit the file, changing `PGDATA` to point to the new `data` directory that you will create the cluster against.

-   Create the target `PGDATA` with user `enterprisedb`.

-   Run `initdb`, specifying the setup script:

    ```text
    /usr/edb/as11/bin/edb-as-11-setup initdb secondary-edb-as-11
    ```

-   Edit the `postgresql.conf` file for the new instance, specifying the port, the IP address, TCP/IP settings, etc.

-   Make sure that new cluster runs after a reboot:

    ```text
    systemctl enable secondary-edb-as-11
    ```

-   Start the second cluster with the following command:

    ```text
    systemctl start secondary-edb-as-11
    ```

## Creating an Advanced Server Repository on an Isolated Network

You can create a local repository to act as a host for the Advanced Server RPM packages if the server on which you wish to install Advanced Server (or supporting components) cannot directly access the EnterpriseDB repository. Please note that this is a high-level listing of the steps requires; you will need to modify the process for your individual network.

To create and use a local repository, you must:

-   Use `yum` or `dnf` to install the `epel-release`, `yum-utils`, and `createrepo` packages.

    On RHEL or CentOS 7.x:

    ```bash
    yum install epel-release
    yum install yum-utils
    yum install createrepo
    ```

    On RHEL or Rocky Linux/AlmaLinux 8.x:

    ```bash
    dnf install epel-release
    dnf install yum-utils
    dnf install createrepo
    ```

-   Create a directory in which to store the repository:

    ```text
    mkdir /srv/repos
    ```

-   Copy the RPM installation packages to your local repository. You can download the individual packages or use a tarball to populate the repository. The packages are available from the EnterpriseDB repository at <https://repos.enterprisedb.com/>.

-   Sync the RPM packages and create the repository.

    ```text
    reposync -r edbas11 -p /srv/repos
    createrepo /srv/repos
    ```

-   Install your preferred webserver on the host that will act as your local repository, and ensure that the repository directory is accessible to the other servers on your network.

-   On each isolated database server, configure `yum` or `dnf` to pull updates from the mirrored repository on your local network. For example, you might create a repository configuration file called `/etc/yum.repos.d/edb-repo` with connection information that specifies:

    ```text
    [edbas11]
    name=EnterpriseDB Advanced Server 11
    baseurl=https://yum.your_domain.com/edbas11
    enabled=1
    gpgcheck=0
    ```

After specifying the location and connection information for your local repository, you can use `yum` or `dnf` commands to install Advanced Server and its supporting components on the isolated servers. For example:

-   On RHEL or CentOS 7:

    ```text
    yum -y install edb-as11-server
    ```

-   On RHEL or Rocky Linux/AlmaLinux 8:

    ```text
    dnf -y install edb-as11-server
    ```

For more information about creating a local `yum` repository, visit:

<https://wiki.centos.org/HowTos/CreateLocalRepos>
