---
title: Configuring EDB Failover Slots
navTitle: Configuring
---

The extension  must be added to shared_preload_libraries on both the primary instance as well as any standby that is used for high availability (failover or switchover) purposes.

The behavior of EDB Failover Slots is configurable using the following configuration options (set in postgresql.conf). The configuration options are prefixed with `edb_failover_slots.`. For example, `edb_failover_slots.synchronize_slot_names`.

## synchronize_slot_names
Allows setting which logical slots should be synchronized to this physical standby. It's a comma-separated list of slot filters.

A slot filter is defined as a `key:value` pair (separated by colon) where `key` can be one of:

- `name` &mdash; Match exact slot name
- `name_like` &mdash; Match slot name against SQL LIKE expression
- `plugin` &mdash; Match slot plugin name against the value

The default is `name` if you omit the key.

For example, `my_slot_name,plugin:test_decoding` synchronizes the slot named `my_slot_name` and any slots that use the test_decoding plugin.

If this is set to an empty string, no slots are synchronized to this physical standby.

The default value is `name_like:%`, which means all logical replication slots are synchronized.

## drop_extra_slots
Controls what happens to extra slots on the standby that are not found on the primary using the `edb_failover_slots.synchronize_slot_names` filter. If it's set to `true` (which is the default), they are dropped. Otherwise, they are kept.

## primary_dsn
Specifies the connection string to use to connect to the primary when fetching slot information.

If empty (the default), then use the same connection string as `primary_conninfo`.

!!!Note 
   You can't use `primary_conninfo` if there is a password field in the connection string because it gets obfuscated by PostgreSQL and EDN Failover Slots can't actually see the password. In this case, `edb_failover_slots.primary_dsn` must be configured.

## standby_slot_names
Ensures that the failover-candidate streaming physical replica(s) have received and flushed all changes before they ever become visible to any subscribers. This guarantees that a commit can't vanish on failover to a standby for the consumer of a logical slot.

Replication slots whose names are listed in the comma-separated `edb_failover_slots.standby_slot_names` list are treated specially by the walsender on the primary.

Logical replication walsenders ensure that all local changes are sent and flushed to the replication slots in `edb_failover_slots.standby_slot_names` before the walsender sends those changes for the logical replication slots. Effectively, it provides a synchronous replication barrier between the named list of slots and all the consumers of logically decoded streams from walsender.

Any replication slot may be listed in `edb_failover_slots.standby_slot_names`. Both logical and physical slots work, but it's generally used for physical slots.

Without this safeguard, two anomalies are possible where a commit can be received by a subscriber and then vanish from the provider on failover because the failover candidate hadn't received it yet:

- For one or more subscribers, the subscriber may have applied the change but the new provider may execute new transactions that conflict with the received change, as it never happened as far as the provider is concerned;

- for two or more subscribers, at the time of failover, not all subscribers have applied the change. The subscribers now have inconsistent and irreconcilable states because the subscribers that didn't receive the commit have no way to get it now.
Setting `edb_failover_slots.standby_slot_names` causes subscribers to lag behind the provider if the provider's failover-candidate replica(s) are not keeping up, by design. Monitoring is thus essential.

## standby_slots_min_confirmed
Controls how many of the `edb_failover_slots.standby_slot_names` have to confirm before we send data through the logical replication slots. Setting `-1` (the default) specifies to wait for all entries in `edb_failover_slots.standby_slot_names`.